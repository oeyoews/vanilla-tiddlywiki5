[
    {
        "created": "20220822125431165",
        "creator": "oeyoews",
        "text": "\\define save-tiddler-actions()\n<$action-sendmessage $message=\"tm-add-tag\" $param={{{ [<newTagNameTiddler>get[text]] }}}/>\n<$action-sendmessage $message=\"tm-add-field\" $name={{{ [<newFieldNameTiddler>get[text]] }}} $value={{{ [<newFieldValueTiddler>get[text]] }}}/>\n<<delete-edittemplate-state-tiddlers>>\n<$action-sendmessage $message=\"tm-save-tiddler\"/>\n<!-- Save & Close -->\n<$action-setfield $tiddler=<<currentItem>> $field=\"caption\" $value={{$:/state/gtd/edit-caption}}/>\n<$action-sendmessage $message=\"tm-auto-save-wiki\"/>\n<$action-sendmessage $message=\"tm-close-tiddler\"/>\n\\end\n\n\\define config-visibility-title()\n$:/config/EditorToolbarButtons/Visibility/$(currentTiddler)$\n\\end\n\n\\define importFileActions()\n<$action-popup $state=<<importState>> $coords=\"(0,0,0,0)\" $floating=\"yes\"/>\n\\end\n\n<$set name=\"currentItem\" value={{$:/state/gtd/edit}}>\n<$set name=\"td-baseName\" value={{{ [<currentItem>removeprefix[$:/]] }}}>\n\n<!-- Editor -->\n<div data-tiddler-title=<<currentItem>> data-tags={{!!tags}} class=\"tc-tiddler-frame tc-tiddler-edit-frame tc-tiddler-exists tc-tiddler-system xp-gtd-editor\">\n<$fieldmangler>\n<$vars storyTiddler=<<currentItem>>>\n<$keyboard key=\"((save-tiddler))\" actions=<<save-tiddler-actions>> tag=\"div\">\n\n<$edit-text tiddler=\"$:/state/gtd/edit-caption\" tag=\"input\" class=\"tc-titlebar tc-edit-texteditor\" focus=\"yes\" tabindex={{$:/config/EditTabIndex}} cancelPopups=\"yes\"/>\n\n<!-- $:/core/ui/EditTemplate/body/default -->\n<div class=\"xp-gtd-editor-body\">\n<$set name=\"edit-preview-state\" value={{{ [{$:/config/ShowEditPreview/PerTiddler}!match[yes]then[$:/state/showeditpreview]] :else[<qualify \"$:/state/showeditpreview\">] }}}>\n<$vars importTitle=<<qualify $:/ImportImage>> importState=<<qualify $:/state/ImportImage>> >\n<$dropzone importTitle=<<importTitle>> autoOpenOnImport=\"no\" contentTypesFilter={{$:/config/Editor/ImportContentTypesFilter}} class=\"tc-dropzone-editor\" enable={{{ [{$:/config/DragAndDrop/Enable}match[no]] :else[subfilter{$:/config/Editor/EnableImportFilter}then[yes]else[no]] }}} filesOnly=\"yes\" actions=<<importFileActions>> ><$reveal stateTitle=<<edit-preview-state>> type=\"match\" text=\"yes\" tag=\"div\">\n<$tiddler tiddler=<<currentItem>>>\n<div class=\"tc-tiddler-preview\">\n\n<$transclude tiddler=\"$:/core/ui/EditTemplate/body/editor\" mode=\"inline\"/>\n\n<div class=\"tc-tiddler-preview-preview\">\n\n<$transclude tiddler={{$:/state/editpreviewtype}} mode=\"inline\">\n\n<$transclude tiddler=\"$:/core/ui/EditTemplate/body/preview/output\" mode=\"inline\"/>\n\n</$transclude>\n\n</div>\n\n</div>\n</$tiddler>\n</$reveal>\n\n<$reveal stateTitle=<<edit-preview-state>> type=\"nomatch\" text=\"yes\" tag=\"div\">\n\n<$edit\n\ttiddler=<<currentItem>>\n  field=\"text\"\n  class=\"tc-edit-texteditor tc-edit-texteditor-body\"\n  placeholder={{$:/language/EditTemplate/Body/Placeholder}}\n  tabindex={{$:/config/EditTabIndex}}\n  focus={{{ [{$:/config/AutoFocus}match[text]then[true]] ~[[false]] }}}\n  cancelPopups=\"yes\"\n  fileDrop={{{ [{$:/config/DragAndDrop/Enable}match[no]] :else[subfilter{$:/config/Editor/EnableImportFilter}then[yes]else[no]] }}}\n><$set\n\n  name=\"targetTiddler\"\n  value=<<currentItem>>\n\n><$list\n\n  filter=\"[all[shadows+tiddlers]tag[$:/tags/EditorToolbar]!has[draft.of]]\"\n\n><$reveal\n\n  type=\"nomatch\"\n  state=<<config-visibility-title>>\n  text=\"hide\"\n  class=\"tc-text-editor-toolbar-item-wrapper\"\n\n><$transclude\n\n  tiddler=\"$:/core/ui/EditTemplate/body/toolbar/button\"\n  mode=\"inline\"\n\n/></$reveal></$list><$list\n\n  filter=\"[all[shadows+tiddlers]tag[$:/tags/EditorTools]!has[draft.of]]\"\n\n><$list\n\tfilter={{!!condition}}\n\tvariable=\"list-condition\"\n><$transclude/>\n</$list></$list></$set></$edit>\n\n</$reveal>\n</$dropzone>\n</$vars>\n</$set>\n</div>\n\n</$keyboard>\n</$vars>\n</$fieldmangler>\n<<gtd-todolist-ui caption:\"Todolist {{||$:/xp/aggregation-gtd/images/pie}}\">>\n</div>\n\n</$set>\n</$set>",
        "title": "$:/xp/aggregation-gtd/ui/EditTemplate",
        "type": "text/vnd.tiddlywiki",
        "modified": "20220822130530811",
        "modifier": "oeyoews",
        "footer": "<span class=\"tc-muted\" style=\"float:left;text-align:left;padding:0.5em 0 0 1em;font-size:0.9em;\">\nStatus:\n<$list filter=\"[<currentItem>!tag[done]]\"><span style=\"color:#cc3333;\">undone</span></$list>\n<$list filter=\"[<currentItem>removeprefix[$:/]addprefix[$:/todolist/data/status/]search:text[undone]]\">\n<$list filter=\"[<currentItem>!tag[done]]\"> / </$list>\n<span style=\"color:#cc3333;\">todolist</span>\n</$list>\n<$list filter=\"[<currentItem>tag[done]]\">\n<$list filter=\"[<currentItem>removeprefix[$:/]addprefix[$:/todolist/data/status/]!search:text[undone]]\">\n<span style=\"color:#00a565;\">completed</span>\n</$list></$list>\n</span>\n<span class=\"py-todo-actions\">\n<$button tooltip=\"Delete all information about this item\" class=\"py-btn\">\n{{$:/core/images/delete-button}}\n<$action-deletetiddler $tiddler=<<currentItem>>/>\n<$action-deletetiddler $filter=\"[prefix[$:/todolist/data]suffix<td-baseName>]\"/>\n<$action-sendmessage $message=\"tm-close-tiddler\"/>\n<$action-listops $tiddler=<<currentList>> $subfilter=\"+[remove<currentItem>]\"/>\n</$button>\n&nbsp;\n<$button tooltip=\"Confirm changes to this item.  ctrl-Enter\" class=\"py-btn\">\n{{$:/core/images/done-button}}\n<$list filter=\"[<currentItem>get[caption]!match{$:/state/gtd/edit-caption}]\">\n<$action-setfield $tiddler=<<currentItem>> $field=\"caption\" $value={{$:/state/gtd/edit-caption}}/>\n</$list>\n<$action-sendmessage $message=\"tm-close-tiddler\"/>\n</$button>&emsp;\n</span>",
        "subtitle": "{{$:/xp/images/q1}} 重要且紧急"
    }
]